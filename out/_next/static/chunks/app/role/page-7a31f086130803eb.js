(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[552],{8291:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(5531).Z)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},5403:function(e,t,r){Promise.resolve().then(r.bind(r,4674))},4674:function(e,t,r){"use strict";r.r(t),r.d(t,{UserRoleSelection:function(){return h}});var s=r(7437),n=r(2265),a=r(4033),i=r(5531);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,i.Z)("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]),o=(0,i.Z)("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),c=(0,i.Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);var d=r(8291),u=r(5754),x=r(5278);function h(){let[e,t]=(0,n.useState)(null),[r,i]=(0,n.useState)(null),[h,m]=(0,n.useState)(!1),[f,g]=(0,n.useState)(null),[p,y]=(0,n.useState)(null),[b,v]=(0,n.useState)(!1),w=(0,a.useRouter)();(0,n.useEffect)(()=>{(async()=>{m(!0),g(null);let{data:{user:e}}=await x.O.auth.getUser();if(!e){w.replace("/");return}y(e.id);let{data:r,error:s}=await x.O.from("users").select("role").eq("id",e.id).single();if(s&&"PGRST116"!==s.code){console.error("Error fetching user profile:",s.message),g("Failed to load your profile. Please try again."),m(!1),v(!0);return}let n=null==r?void 0:r.role;i(n),t(n),m(!1),v(!0)})()},[w]);let j=(0,n.useCallback)(e=>{t(e)},[]),k=async()=>{if(!e||!p){g("Please select a role.");return}if(e===r&&null!==r){"viewer"===e?w.push("/"):w.push("/startup-registration");return}m(!0),g(null);try{let{error:t}=await x.O.from("users").update({role:e}).eq("id",p);if(t)throw t;i(e),"viewer"===e?w.push("/"):"creator"===e&&w.push("/startup-registration")}catch(e){console.error("Error updating role:",e.message),g(e.message||"Failed to save your role. Please try again.")}finally{m(!1)}};return b?(0,s.jsxs)("div",{className:"min-h-screen flex flex-col items-center justify-between py-8 px-4",style:{backgroundColor:"#0A0A23"},children:[(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center flex-grow text-center py-12",children:[(0,s.jsx)("h1",{className:"text-4xl md:text-5xl font-bold text-white mb-4",children:"Who You Are"}),(0,s.jsx)("p",{className:"text-lg md:text-xl text-gray-300 mb-6",children:"Please choose your plan below"}),r&&(0,s.jsxs)("p",{className:"text-lg text-gray-400 mb-8",children:["Your current role is: ",(0,s.jsx)("span",{className:"font-semibold capitalize text-purple-400",children:r})]}),f&&(0,s.jsx)("div",{className:"text-red-500 mb-4",children:f}),(0,s.jsxs)("div",{className:"flex flex-col md:flex-row gap-6 md:gap-10",children:[(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center p-8 rounded-2xl cursor-pointer transition-all duration-300 w-64 h-64 md:w-72 md:h-72\n              ".concat("viewer"===e?"bg-[#8B00FF] shadow-lg shadow-[#8B00FF]/40":"bg-gray-800 border-2 border-gray-700","\n            "),onClick:()=>j("viewer"),children:[(0,s.jsx)(l,{className:"h-24 w-24 text-white mb-4"}),(0,s.jsx)("span",{className:"text-white text-2xl font-semibold",children:"Viewer"})]}),(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center p-8 rounded-2xl cursor-pointer transition-all duration-300 w-64 h-64 md:w-72 md:h-72\n              ".concat("creator"===e?"bg-[#8B00FF] shadow-lg shadow-[#8B00FF]/40":"bg-gray-800 border-2 border-gray-700","\n            "),onClick:()=>j("creator"),children:[(0,s.jsx)(o,{className:"h-24 w-24 text-white mb-4"}),(0,s.jsx)("span",{className:"text-white text-2xl font-semibold",children:"Creator"})]})]})]}),(0,s.jsxs)("div",{className:"w-full flex justify-between items-center max-w-7xl mx-auto mt-auto pt-8",children:[(0,s.jsxs)(u.z,{variant:"ghost",className:"text-gray-300 hover:text-white text-lg font-semibold",onClick:()=>w.back(),children:[(0,s.jsx)(c,{className:"h-5 w-5 mr-2"}),"Back"]}),(0,s.jsxs)(u.z,{className:"bg-[#8B00FF] text-white h-12 px-8 rounded-full text-lg font-semibold hover:bg-purple-700 transition-colors",disabled:null===e||h,onClick:k,children:[h?"Saving...":"Continue",(0,s.jsx)(d.Z,{className:"h-5 w-5 ml-2"})]})]})]}):(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-[#0A0A23] text-white",children:(0,s.jsx)("p",{children:"Loading role options..."})})}},5754:function(e,t,r){"use strict";r.d(t,{z:function(){return c}});var s=r(7437),n=r(2265),a=r(7256),i=r(6061),l=r(1657);let o=(0,i.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),c=n.forwardRef((e,t)=>{let{className:r,variant:n,size:i,asChild:c=!1,...d}=e,u=c?a.g7:"button";return(0,s.jsx)(u,{className:(0,l.cn)(o({variant:n,size:i,className:r})),ref:t,...d})});c.displayName="Button"},5278:function(e,t,r){"use strict";r.d(t,{O:function(){return s}});let s=(0,r(2362).eI)("https://cvcmjtyamlwgkcmsiemd.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImN2Y21qdHlhbWx3Z2tjbXNpZW1kIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk4OTQyNTEsImV4cCI6MjA2NTQ3MDI1MX0.HyRKMdofXJjlbnsagmQscBBTSr0aJBkxaSzAkPoyA2k")},1657:function(e,t,r){"use strict";r.d(t,{cn:function(){return a}});var s=r(7042),n=r(4769);function a(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,n.m6)((0,s.W)(t))}}},function(e){e.O(0,[900,362,971,938,744],function(){return e(e.s=5403)}),_N_E=e.O()}]);